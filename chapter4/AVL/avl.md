## AVL Tree 平衡二叉搜索树

### 什么是AVL

AVL是BST的一种，是为了优化BST各种操作的时间复杂度而生的一种新的结构。
在BST左右的节点都是均匀分布的情况下，每一个操作的时间复杂度都是O(logN)，但是如果左右节点分布的不平衡，
每一个操作的时间复杂度都会上升。考虑一种极端的情况，每一个节点都只有左子树而没有右子树，这颗数长得就像
一个链表，然后每次遍历都要判断一下左右节点，这种树的效率还不如链表呢。

AVL就是为了使得二叉搜索树的各种操作的效率尽量最大化而生的。
一个BST要想成为AST只需要满足平衡的条件。
所谓平衡就是————每个节点的左右节点的高度相差不得大于1。
注意这里说的并不是只针对根节点，针对的是所有的节点。

### 一个树是怎样变得不平衡的

即使是一个AVL，经过一些操作之后也是会变成不平衡的树，其中主要是下面的两个操作

- insert 当我们插入数据的时候，我们的根节点是没有改变的，因而我们不能保证根节点是平衡的，那么我们更不能保证这个树
是平衡的。
- delete  上面我们在删除某个节点的时候，使用的是如下的策略（当该节点有两个节点的时候），删除该节点的右子树中的最小的元素。这将明显的导致左子树中节点的个数将远远的大于右子树中节点的个数。

### 如何将树变平衡

通常我们需要调整需要平衡的节点的位置，这个操作一般被称为旋转。

- 单旋转

旋转可以分为两个方向，一个是顺时针，另一个是逆时针。当我们顺时针将树进行旋转的时候，左子树中有点节点将进入到左子树当中去，
同理，逆时针旋转右子树的节点会进入到左子树中。
让我们以顺时针旋转为例，看一下具体的操作如何。

1. 将左子树中right指向根节点。（根节点的左子节点将作为新的根节点）
2. 将根节点的left指向左子节点的右节点
3. 将左子结点作为新的根节点返回

通过上面的操作，我们发现原先的左子树的右子树到了新的树的右子树的左子树。
但是单旋转不能解决如下的问题。
长的节点是左子树的右节点或者是右子树的左节点。此时使用单旋转似乎是无解的。

- 双旋转
当我们发现左子树的右子树的高度太高的时候，我们可以采用这样的策略，相对左子树进行左旋转，直到左子树的高度降下了了，
此时我们就可以使用单旋转的方式对该节点进行右旋转。
可见，通过这种方式我们可以将树变成一颗平衡树，因为同时使用了左旋转和右旋转，所以这个操作被称为双旋转。


